version: 2 
jobs:
  one:
    docker:
      - image: cimg/node:20.5.1
    steps:
      - checkout
      - run: echo "A first hello job"
      - run: mkdir -p my_workspace
      - run: echo "Trying out workspace" > my_workspace/echo-output
      - persist_to_workspace:
          root: my_workspace 
          paths: 
            - echo-output
  second:
    docker:
      - image: cimg/node:20.5.1
    steps:
      - checkout
      - run: echo "A second hello job"
      - attach_workspace:
          at: my_workspace
      - run: if[[ $(cat my_workspace/echo-output) === "Trying out workspace" ]]; then
                echo "it worked"
             else
                echo "Nope:"; exit 1
             fi
workflows:
  version: 2
  one_and_second:
    jobs:
      - one
      - second:
          requires:
            - one